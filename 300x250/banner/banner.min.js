function initCSS(){TweenLite.set($("#blue-shape"),{alpha:.9,rotation:50,scaleX:.4,scaleY:.4,x:60,y:80,overwrite:"none",force3D:!1}),TweenLite.set($("#red-shape"),{alpha:.8,rotation:-20,scaleX:.2,scaleY:.2,x:140,y:83,overwrite:"none",force3D:!1}),TweenLite.set($("#mask-shape"),{rotation:30,scaleX:.3,scaleY:.3,x:-2235,y:-1270,overwrite:"none",force3D:!1}),TweenLite.set($(".shapes"),{rotation:160,transformOrigin:"50% 50%",overwrite:"none",force3D:!1}),TweenLite.set($("#red-shape-end-frame"),{scaleX:.1,x:20,y:310,overwrite:"none",force3D:!1}),TweenLite.set($("#red-shape-end-frame2"),{autoAlpha:0,rotation:50,scaleX:1,scaleY:1.1,x:150,y:-130}),TweenLite.set($(".terms-wrapper"),{alpha:0}),TweenLite.set($(".button"),{alpha:0,scale:.5}),TweenLite.set($(".logos"),{alpha:0})}function adjustCopyLayout(){}function f1CopyAnimation(){for(var e=new TimelineLite,t=new SplitText("#f1-copy",{type:"chars",absolute:!0}),s=new SplitText("#f2-copy",{type:"chars",absolute:!0}),i=shuffleLetters(t.chars,s.chars),n=i[0],a=i[1],r="XYZ0123456789",o=0;o<n.length;o++)e.from([n[o],a[o]],.8,{alpha:0,overwrite:"all",scrambleText:{text:"X",chars:r,revealDelay:1,speed:.3},delay:.5},.1*o)}function f2CopyAnimation(){for(var e=new TimelineLite,t=new SplitText("#f3-copy",{type:"chars",absolute:!0}),s=new SplitText("#f4-copy",{type:"chars",absolute:!0}),i=shuffleLetters(t.chars,s.chars),n=i[0],a=i[1],r="weruioaszxcvnm",o=0;o<n.length;o++)e.from([n[o],a[o]],.4,{alpha:0,overwrite:"all",scrambleText:{text:"x",chars:r,revealDelay:0,speed:.3},delay:4.5},.08*o)}function f3CopyAnimation(){var e=new TimelineLite,t=new SplitText("#price",{type:"chars",absolute:!0}),s=($("#price"),$("#price").children()),i=s.last(),n=price;if(n.indexOf(",")>-1){var a=n.split(","),r=a[0],o=a[1];a=r+o}var l=i[0].style.left;l.length>=5?(l=l.substring(0,l.length-2),l-=8,l+="px"):(l=l.substring(0,l.length-2),l-=5,l+="px"),i.css({top:"-8px",fontSize:"16px",color:"#fff",left:l});for(var h=s.length-1,p=(shuffleArray(t.chars),1);h>p;p++){var c=price.length;c>=5?2==p&&(p+=1):c>=6&&3==p&&(p+=1),e.from(s[p],1,{alpha:0,overwrite:"all",scrambleText:{text:"X",chars:"123456789",revealDelay:0,speed:.3},delay:10},"0")}}function startAnimation(){$(".container").show(),$(".loader").hide();var e=new TimelineLite,t=$("#f5-copy"),s=$(".terms-wrapper"),i=$(".button"),n=$(".bg-image"),a=$(".logos"),r=$(".shapes"),o=$("#red-shape"),l=$("#blue-shape"),h=$("#mask-shape"),p=$("#price"),c=$("#red-shape-end-frame"),f=$("#red-shape-end-frame2");e.to(r,2,{alpha:1,rotation:-9,transformOrigin:"50% 50%"},"0"),e.from(o,.5,{alpha:1,transformOrigin:"50% 50%",x:135,y:85,ease:Back.easeOut},"0"),e.to(h,1.2,{rotation:0,scaleX:1.1,scaleY:1.1,x:-2140,y:-1315,ease:Sine.easeInOut},"0"),e.to(o,1,{rotation:-10,scaleX:1,scaleY:1,x:211,y:35,ease:Sine.easeInOut},".3"),e.to(l,1,{rotation:-90,scaleX:1.1,scaleY:1.1,x:5,y:130,ease:Sine.easeInOut},".3"),e.to(h,.5,{rotation:0,scaleX:2.3,scaleY:2.3,x:-1950,y:-1315,ease:Back.easeIn},"1.1"),e.to(l,.5,{rotation:-180,scaleX:1.3,scaleY:1.3,x:-80,y:180,ease:Sine.easeInOut},"1.4"),e.to(o,.4,{rotation:-20,scaleX:2,scaleY:2,x:301,y:-5,ease:Sine.easeInOut},"1.4"),e.add(f1CopyAnimation,"0"),e.add(fadeF1OutText,"4.5"),e.add(f2CopyAnimation,"0"),e.add(fadeF2OutText,"9"),e.to(o,1.8,{rotation:-20,scaleX:2.5,scaleY:2.5,x:330,y:-95,ease:Expo.easeIn},"8.3"),e.to(l,1.8,{rotation:40,scaleX:1,scaleY:1,x:-150,y:300,ease:Expo.easeIn},"8.3"),e.to(n,1,{alpha:0,ease:Sine.easeOut},"9.5"),e.to(a,1,{alpha:1,ease:Sine.easeOut},"9.7"),e.from(t,1,{alpha:0,y:-10,ease:Sine.easeOut},"9.9"),e.from(p,1.4,{alpha:0,y:-10,ease:Sine.easeOut},"9.9"),e.to(s,1,{alpha:1,ease:Sine.easeOut},"9.9"),e.to(i,1,{alpha:1,scale:1,ease:Sine.easeOut},"9.7"),e.to(c,2,{autoAlpha:.8,scaleX:.3,scaleY:.7,x:-10,y:150,rotation:-30,ease:Sine.easeInOut},"8.5"),e.to(f,2.4,{autoAlpha:.4,rotation:5,scaleX:1.05,scaleY:1.05,x:30,y:10,ease:Sine.easeInOut},"8.5"),e.add(f3CopyAnimation,"0")}function fadeF1OutText(){for(var e=new TimelineLite,t=$("#f1-copy div"),s=$("#f2-copy div"),i=0;i<t.length;i++)e.to([t,s],1,{alpha:0,scrambleText:{text:" ",revealDelay:0,speed:.3},ease:Sine.easeOut},.2*i)}function fadeF2OutText(){for(var e=new TimelineLite,t=$("#f3-copy div"),s=$("#f4-copy div"),i=0;i<t.length;i++)e.to([t,s],.6,{alpha:0,scrambleText:{text:" ",chars:"lowerCase",revealDelay:0,speed:.3},ease:Sine.easeOut},.1*i)}function shuffleArray(e){for(var t=e.length-1;t>0;t--){var s=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[s],e[s]=i}return e}function shuffleLetters(e,t){for(var s=e.length-1;s>0;s--){var i=Math.floor(Math.random()*(s+1)),n=e[s],a=t[s];e[s]=e[i],e[i]=n,t[s]=t[i],t[i]=a}return[e,t]}function preloadimages(e){function t(){i++,i==e.length&&n(s)}for(var s=[],i=0,n=function(){},e="object"!=typeof e?[e]:e,a=0;a<e.length;a++)s[a]=new Image,s[a].src=e[a],s[a].onload=function(){t()},s[a].onerror=function(){t()};return{done:function(e){n=e||n}}}var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var e=function(t){var s=t.nodeType,i="";if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=e(t)}else if(3===s||4===s)return t.nodeValue;return i},t=function(e,t){for(var s=t.length,i="";--e>-1;)i+=t[Math.random()*s|0];return i},s=function(e){this.chars=e.split(""),this.sets=[],this.length=50;var s;for(s=0;20>s;s++)this.sets[s]=t(80,this.chars);this.grow=function(e){for(s=0;20>s;s++)this.sets[s]+=t(e-this.length,this.chars);this.length=e}},i="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=i.toLowerCase(),a={upperCase:new s(i),lowerCase:new s(n),upperAndLowerCase:new s(i+n)},r=_gsScope._gsDefine.plugin({propName:"scrambleText",version:"0.2.2",API:2,overwriteProps:["scrambleText","text"],init:function(t,i,n){if(this._prop="innerHTML"in t?"innerHTML":"textContent"in t?"textContent":0,!this._prop)return!1;this._target=t,"object"!=typeof i&&(i={text:i});var r,o,l,h;return this._delimiter=r=i.delimiter||"",this._original=e(t).replace(/\s+/g," ").split("&nbsp;").join("").split(r),this._text=(i.text||i.value||"").replace(/\s+/g," ").split(r),this._hasClass=!1,"string"==typeof i.newClass&&(this._newClass=i.newClass,this._hasClass=!0),"string"==typeof i.oldClass&&(this._oldClass=i.oldClass,this._hasClass=!0),o=this._text.length-this._original.length,this._length=this._original.join(r).length,this._lengthDif=this._text.join(r).length-this._length,this._fillChar=i.fillChar||i.chars&&-1!==i.chars.indexOf(" ")?"&nbsp;":"",this._charSet=h=a[i.chars||"upperCase"]||new s(i.chars),this._speed=.016/(i.speed||1),this._prevScrambleTime=0,this._setIndex=20*Math.random()|0,l=this._length+Math.max(this._lengthDif,0),l>h.length&&h.grow(l),this._chars=h.sets[this._setIndex],this._revealDelay=i.revealDelay||0,this._tweenLength=i.tweenLength!==!1,this._tween=n,!0},set:function(e){var t,s,i,n,a,r,o=this._text.length,l=this._delimiter,h=this._tween._time,p=h-this._prevScrambleTime;this._revealDelay&&(this._tween.vars.runBackwards&&(h=this._tween._duration-h),e=0===h?0:h<this._revealDelay?1e-6:h===this._tween._duration?1:this._tween._ease.getRatio((h-this._revealDelay)/(this._tween._duration-this._revealDelay))),0>e?e=0:e>1&&(e=1),t=e*o+.5|0,s=this._text.slice(0,t).join(l),i=this._original.slice(t).join(l),e&&((p>this._speed||p<-this._speed)&&(this._setIndex=(this._setIndex+(19*Math.random()|0))%20,this._chars=this._charSet.sets[this._setIndex],this._prevScrambleTime+=p),i=this._chars.substr(s.length,this._length+(this._tweenLength?1-(e=1-e)*e*e*e:1)*this._lengthDif-s.length+.5|0)),this._hasClass?(n=this._newClass&&0!==t,a=this._oldClass&&t!==o,r=(n?"<span class='"+this._newClass+"'>":"")+s+(n?"</span>":"")+(a?"<span class='"+this._oldClass+"'>":"")+l+i+(a?"</span>":"")):r=s+l+i,this._target[this._prop]="&nbsp;"===this._fillChar&&-1!==r.indexOf("  ")?r.split("  ").join("&nbsp;&nbsp;"):r}}),o=r.prototype;o._newClass=o._oldClass="";for(o in a)a[o.toLowerCase()]=a[o],a[o.toUpperCase()]=a[o]}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()();var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;!function(e){"use strict";var t=e.GreenSockGlobals||e,s=function(e){var s,i=e.split("."),n=t;for(s=0;s<i.length;s++)n[i[s]]=n=n[i[s]]||{};return n},i=s("com.greensock.utils"),n=function(e){var t=e.nodeType,s="";if(1===t||9===t||11===t){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)s+=n(e)}else if(3===t||4===t)return e.nodeValue;return s},a=document,r=a.defaultView?a.defaultView.getComputedStyle:function(){},o=/([A-Z])/g,l=function(e,t,s,i){var n;return(s=s||r(e,null))?(e=s.getPropertyValue(t.replace(o,"-$1").toLowerCase()),n=e||s.length?e:s[t]):e.currentStyle&&(s=e.currentStyle,n=s[t]),i?n:parseInt(n,10)||0},h=function(e){return!!(e.length&&e[0]&&(e[0].nodeType&&e[0].style&&!e.nodeType||e[0].length&&e[0][0]))},p=function(e){var t,s,i,n=[],a=e.length;for(t=0;a>t;t++)if(s=e[t],h(s))for(i=s.length,i=0;i<s.length;i++)n.push(s[i]);else n.push(s);return n},c=")eefec303079ad17405c",f=/(?:<br>|<br\/>|<br \/>)/gi,d=a.all&&!a.addEventListener,u="<div style='position:relative;display:inline-block;"+(d?"*display:inline;*zoom:1;'":"'"),g=function(e){e=e||"";var t=-1!==e.indexOf("++"),s=1;return t&&(e=e.split("++").join("")),function(){return u+(e?" class='"+e+(t?s++:"")+"'>":">")}},y=i.SplitText=t.SplitText=function(e,t){if("string"==typeof e&&(e=y.selector(e)),!e)throw"cannot split a null element.";this.elements=h(e)?p(e):[e],this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=t||{},this.split(t)},x=function(e,t,s){var i=e.nodeType;if(1===i||9===i||11===i)for(e=e.firstChild;e;e=e.nextSibling)x(e,t,s);else(3===i||4===i)&&(e.nodeValue=e.nodeValue.split(t).join(s))},m=function(e,t){for(var s=t.length;--s>-1;)e.push(t[s])},_=function(e,t,s,i,o){f.test(e.innerHTML)&&(e.innerHTML=e.innerHTML.replace(f,c));var h,p,d,u,y,_,v,w,C,T,b,S,L,$,O=n(e),A=t.type||t.split||"chars,words,lines",D=-1!==A.indexOf("lines")?[]:null,I=-1!==A.indexOf("words"),M=-1!==A.indexOf("chars"),X="absolute"===t.position||t.absolute===!0,Y=X?"&#173; ":" ",j=-999,H=r(e),N=l(e,"paddingLeft",H),k=l(e,"borderBottomWidth",H)+l(e,"borderTopWidth",H),B=l(e,"borderLeftWidth",H)+l(e,"borderRightWidth",H),E=l(e,"paddingTop",H)+l(e,"paddingBottom",H),W=l(e,"paddingLeft",H)+l(e,"paddingRight",H),R=l(e,"textAlign",H,!0),V=e.clientHeight,F=e.clientWidth,Q="</div>",G=g(t.wordsClass),P=g(t.charsClass),z=-1!==(t.linesClass||"").indexOf("++"),Z=t.linesClass,q=-1!==O.indexOf("<"),U=!0,J=[],K=[],ee=[];for(z&&(Z=Z.split("++").join("")),q&&(O=O.split("<").join("{{LT}}")),h=O.length,u=G(),y=0;h>y;y++)if(v=O.charAt(y),")"===v&&O.substr(y,20)===c)u+=(U?Q:"")+"<BR/>",U=!1,y!==h-20&&O.substr(y+20,20)!==c&&(u+=" "+G(),U=!0),y+=19;else if(" "===v&&" "!==O.charAt(y-1)&&y!==h-1&&O.substr(y-20,20)!==c){for(u+=U?Q:"",U=!1;" "===O.charAt(y+1);)u+=Y,y++;(")"!==O.charAt(y+1)||O.substr(y+1,20)!==c)&&(u+=Y+G(),U=!0)}else"{"===v&&"{{LT}}"===O.substr(y,6)?(u+=M?P()+"{{LT}}</div>":"{{LT}}",y+=5):u+=M&&" "!==v?P()+v+"</div>":v;for(e.innerHTML=u+(U?Q:""),q&&x(e,"{{LT}}","<"),_=e.getElementsByTagName("*"),h=_.length,w=[],y=0;h>y;y++)w[y]=_[y];if(D||X)for(y=0;h>y;y++)C=w[y],d=C.parentNode===e,(d||X||M&&!I)&&(T=C.offsetTop,D&&d&&T!==j&&"BR"!==C.nodeName&&(p=[],D.push(p),j=T),X&&(C._x=C.offsetLeft,C._y=T,C._w=C.offsetWidth,C._h=C.offsetHeight),D&&(I!==d&&M||(p.push(C),C._x-=N),d&&y&&(w[y-1]._wordEnd=!0),"BR"===C.nodeName&&C.nextSibling&&"BR"===C.nextSibling.nodeName&&D.push([])));for(y=0;h>y;y++)C=w[y],d=C.parentNode===e,"BR"!==C.nodeName?(X&&(S=C.style,I||d||(C._x+=C.parentNode._x,C._y+=C.parentNode._y),S.left=C._x+"px",S.top=C._y+"px",S.position="absolute",S.display="block",S.width=C._w+1+"px",S.height=C._h+"px"),I?d&&""!==C.innerHTML?K.push(C):M&&J.push(C):d?(e.removeChild(C),w.splice(y--,1),h--):!d&&M&&(T=!D&&!X&&C.nextSibling,e.appendChild(C),T||e.appendChild(a.createTextNode(" ")),J.push(C))):D||X?(e.removeChild(C),w.splice(y--,1),h--):I||e.appendChild(C);if(D){for(X&&(b=a.createElement("div"),e.appendChild(b),L=b.offsetWidth+"px",T=b.offsetParent===e?0:e.offsetLeft,e.removeChild(b)),S=e.style.cssText,e.style.cssText="display:none;";e.firstChild;)e.removeChild(e.firstChild);for($=!X||!I&&!M,y=0;y<D.length;y++){for(p=D[y],b=a.createElement("div"),b.style.cssText="display:block;text-align:"+R+";position:"+(X?"absolute;":"relative;"),Z&&(b.className=Z+(z?y+1:"")),ee.push(b),h=p.length,_=0;h>_;_++)"BR"!==p[_].nodeName&&(C=p[_],b.appendChild(C),$&&(C._wordEnd||I)&&b.appendChild(a.createTextNode(" ")),X&&(0===_&&(b.style.top=C._y+"px",b.style.left=N+T+"px"),C.style.top="0px",T&&(C.style.left=C._x-T+"px")));0===h&&(b.innerHTML="&nbsp;"),I||M||(b.innerHTML=n(b).split(String.fromCharCode(160)).join(" ")),X&&(b.style.width=L,b.style.height=C._h+"px"),e.appendChild(b)}e.style.cssText=S}X&&(V>e.clientHeight&&(e.style.height=V-E+"px",e.clientHeight<V&&(e.style.height=V+k+"px")),F>e.clientWidth&&(e.style.width=F-W+"px",e.clientWidth<F&&(e.style.width=F+B+"px"))),m(s,J),m(i,K),m(o,ee)},v=y.prototype;v.split=function(e){this.isSplit&&this.revert(),this.vars=e||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var t=this.elements.length;--t>-1;)this._originals[t]=this.elements[t].innerHTML,_(this.elements[t],this.vars,this.chars,this.words,this.lines);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},v.revert=function(){if(!this._originals)throw"revert() call wasn't scoped properly.";for(var e=this._originals.length;--e>-1;)this.elements[e].innerHTML=this._originals[e];return this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},y.selector=e.$||e.jQuery||function(t){var s=e.$||e.jQuery;return s?(y.selector=s,s(t)):"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t)},y.version="0.3.4"}(_gsScope),function(e){"use strict";var t=function(){return(_gsScope.GreenSockGlobals||_gsScope)[e]};"function"==typeof define&&define.amd?define(["TweenLite"],t):"undefined"!=typeof module&&module.exports&&(module.exports=t())}("SplitText");var tl;$(document).ready(function(){var e=["close.gif","shape-blue.svg","shape-mask.svg","shape-red-end-frame.svg","shape-red-end-frame2.svg","shape-red.svg","shape-white.svg"];preloadimages(e).done(function(e){initCSS(),adjustCopyLayout(),setTimeout(function(){startAnimation()},240),$(".overlay-close").click(function(){$(".overlay").hide(),$(".terms-wrapper").show()}),$(".overlay-trigger").click(function(){$(".terms-wrapper").hide(),$(".overlay").show()})})});var f1Copy="QANTAS<br />FLY AWAY<br >SALE",f2Copy="Fly away to<br/>Shanghai now",price="1,234";$("#f1-copy").html(f1Copy),$("#f2-copy").html(f1Copy),$("#f3-copy").html(f2Copy),$("#f4-copy").html(f2Copy),$("#price-animation").html(price);